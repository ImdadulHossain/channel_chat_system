<!-- chat/templates/chat/index.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Chat Rooms</title>

  <!-- Optional modern font (falls back gracefully) -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg-start: #0f172a; /* slate-900 */
      --bg-end:   #1e293b; /* slate-800 */
      --card:     #0b1220cc;
      --text:     #e5e7eb; /* gray-200 */
      --muted:    #94a3b8; /* slate-400 */
      --accent:   #6366f1; /* indigo-500 */
      --accent-2: #8b5cf6; /* violet-500 */
      --ring:     #a78bfa; /* violet-400 */
      --shadow:   0 20px 40px rgba(0,0,0,.35);
    }

    * { box-sizing: border-box; }
    html, body {
      height: 100%;
      margin: 0;
      font-family: "Inter", system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      color: var(--text);
      background: radial-gradient(1200px 800px at 20% 10%, #111827 0%, transparent 60%),
                  radial-gradient(1000px 700px at 80% 90%, #0b1220 0%, transparent 55%),
                  linear-gradient(160deg, var(--bg-start), var(--bg-end));
      background-attachment: fixed;
    }

    .wrap {
      min-height: 100%;
      display: grid;
      place-items: center;
      padding: 24px;
    }

    .card {
      width: 100%;
      max-width: 520px;
      background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
      border: 1px solid rgba(255,255,255,.08);
      border-radius: 20px;
      padding: 28px;
      box-shadow: var(--shadow);
      backdrop-filter: blur(8px);
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 6px 10px;
      border-radius: 999px;
      font-size: 12px;
      letter-spacing: .02em;
      color: #c7d2fe;
      background: linear-gradient(90deg, rgba(99,102,241,.25), rgba(139,92,246,.25));
      border: 1px solid rgba(167,139,250,.35);
    }

    h1{
      margin: 14px 0 8px;
      font-size: 28px;
      line-height: 1.2;
      font-weight: 600;
      letter-spacing: .01em;
    }

    .sub {
      margin: 0 0 24px;
      color: var(--muted);
      font-size: 14px;
    }

    .field {
      display: grid;
      gap: 10px;
      margin: 18px 0 8px;
    }

    label {
      font-size: 13px;
      color: #cbd5e1; /* slate-300 */
    }

    .input-row{
      display: flex;
      gap: 10px;
    }

    input[type="text"]{
      flex: 1 1 auto;
      height: 48px;
      border-radius: 14px;
      border: 1px solid rgba(148,163,184,.35);
      background: rgba(15,23,42,.6);
      color: var(--text);
      padding: 0 14px;
      font-size: 16px;
      outline: none;
      transition: border-color .15s ease, box-shadow .15s ease, background .15s ease;
    }
    input[type="text"]::placeholder { color: #94a3b8; }
    input[type="text"]:focus{
      border-color: var(--ring);
      box-shadow: 0 0 0 4px rgba(167,139,250,.25);
      background: rgba(15,23,42,.75);
    }

    input[type="button"]{
      flex: 0 0 auto;
      height: 48px;
      padding: 0 18px;
      border: 0;
      border-radius: 14px;
      font-size: 15px;
      font-weight: 600;
      letter-spacing: .01em;
      color: white;
      background: linear-gradient(135deg, var(--accent), var(--accent-2));
      cursor: pointer;
      transition: transform .08s ease, filter .15s ease, box-shadow .15s ease;
      box-shadow: 0 8px 18px rgba(99,102,241,.35);
    }
    input[type="button"]:hover { filter: brightness(1.06); }
    input[type="button"]:active { transform: translateY(1px) scale(.99); }

    .hint {
      margin-top: 10px;
      font-size: 12px;
      color: var(--muted);
    }

    .footer {
      margin-top: 22px;
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 12px;
      color: var(--muted);
      border-top: 1px solid rgba(148,163,184,.15);
      padding-top: 14px;
    }

    @media (prefers-color-scheme: light) {
      :root{
        --bg-start: #f8fafc;
        --bg-end: #eef2f7;
        --text: #0f172a;
        --muted:#475569;
      }
      .card{
        background: #ffffffaa;
        border-color: rgba(15,23,42,.08);
      }
      input[type="text"]{ background: #ffffffd9; color: #0f172a; }
      .footer { border-top-color: rgba(15,23,42,.08); }
    }

  .composer{
    margin-top:12px;
    display:flex;
    gap:10px;
    align-items:center;     /* keep the button vertically aligned */
  }

  /* KEY FIX â€” allow the text input to shrink inside the flex row */
  #chat-message-input{
    flex: 1 1 0%;
    min-width: 0;           /* <-- prevents overflow caused by size="100" */
    width: auto;            /* ignore the intrinsic 100ch width */
  }

  #chat-message-submit{
    flex: 0 0 auto;
  }

  /* Optional: on very small screens, stack input + button */
  @media (max-width: 520px){
    .composer{ flex-direction: column; }
    #chat-message-submit{ width: 100%; }
  }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <span class="badge">ðŸ’¬ Live Chat</span>
      <h1>What chat room would you like to enter?</h1>
      <p class="sub">Type a room name and press Enter or click Enter to continue.</p>

      <div class="field">
        <label for="room-name-input">Room name</label>
        <div class="input-row">
          <input id="room-name-input" type="text" size="100" placeholder="e.g., lobby">
          <input id="room-name-submit" type="button" value="Enter">
        </div>
        <div class="hint">Example: <code>lobby</code> â†’ navigates to <code>/api/lobby/</code></div>
      </div>

      <div class="footer">
        <span>Tip:</span>
        <span>You can paste a room slug and hit Enter.</span>
      </div>
    </div>
  </div>

  <!-- Functionality kept exactly the same -->
  <script>
    document.querySelector('#room-name-input').focus();
    document.querySelector('#room-name-input').onkeyup = function(e) {
        if (e.key === 'Enter') {  // enter, return
            document.querySelector('#room-name-submit').click();
        }
    };

    document.querySelector('#room-name-submit').onclick = function(e) {
        var roomName = document.querySelector('#room-name-input').value;
        window.location.pathname = '/api/' + roomName + '/';
    };
  </script>
</body>
</html>
